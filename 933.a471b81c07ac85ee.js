"use strict";(self.webpackChunkcsharp_cash=self.webpackChunkcsharp_cash||[]).push([[933],{6848:(B,_,i)=>{i.d(_,{n:()=>k});var s=i(4438),f=i(177);const p=["*"];function e(u,m){1&u&&s.nrm(0,"span",2)}let k=(()=>{class u{constructor(){this.tipo="primario",this.tamanho="medio",this.desabilitado=!1,this.carregando=!1,this.classeExtra="",this.cheio=!1,this.tipoHtml="button",this.aoClicar=new s.bkB,this.classes=(0,s.EWP)(()=>{const b=String(this.tamanho),d={primario:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold rounded-2xl shadow-lg shadow-purple-900/20 transition transform active:scale-95",secundario:"border border-purple-500/40 text-purple-300 hover:bg-purple-500/10",perigo:"bg-pink-600 hover:bg-pink-500 text-white shadow-lg",texto:"text-purple-300 hover:text-purple-200 bg-transparent"};return("pequeno"===b?"px-3 py-1 text-xs":"grande"===b?"px-6 py-3 text-base":"px-4 py-2 text-sm")+" "+(d[String(this.tipo)]||d.primario)+(this.cheio?" w-full":"")+(this.classeExtra?" "+this.classeExtra:"")})}static{this.\u0275fac=function(h){return new(h||u)}}static{this.\u0275cmp=s.VBU({type:u,selectors:[["app-botao"]],inputs:{tipo:"tipo",tamanho:"tamanho",desabilitado:"desabilitado",carregando:"carregando",classeExtra:"classeExtra",cheio:"cheio",tipoHtml:"tipoHtml"},outputs:{aoClicar:"aoClicar"},standalone:!0,features:[s.aNF],ngContentSelectors:p,decls:3,vars:5,consts:[[1,"inline-flex","items-center","justify-center","font-semibold","transition","rounded-xl","disabled:opacity-60","disabled:cursor-not-allowed",3,"click","disabled"],["class","mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white/60 border-t-transparent",4,"ngIf"],[1,"mr-2","h-4","w-4","animate-spin","rounded-full","border-2","border-white/60","border-t-transparent"]],template:function(h,d){1&h&&(s.NAR(),s.j41(0,"button",0),s.bIt("click",function(){return d.aoClicar.emit()}),s.DNE(1,e,1,0,"span",1),s.SdG(2),s.k0s()),2&h&&(s.HbH(d.classes()),s.Y8G("disabled",d.desabilitado||d.carregando),s.BMQ("type",d.tipoHtml),s.R7$(),s.Y8G("ngIf",d.carregando))},dependencies:[f.MD,f.bT],encapsulation:2,changeDetection:0})}}return u})()},3993:(B,_,i)=>{i.d(_,{JM:()=>s,nT:()=>f});var s=function(e){return e.Primario="primario",e.Secundario="secundario",e.Perigo="perigo",e.Texto="texto",e}(s||{}),f=function(e){return e.Pequeno="pequeno",e.Medio="medio",e.Grande="grande",e}(f||{})},6933:(B,_,i)=>{i.r(_),i.d(_,{ConfiguracoesPageComponent:()=>T});var s=i(177),f=i(4341),p=i(467),e=i(4438),k=i(6848),u=i(8067),m=i(6939);function b(r,g){1&r&&(e.j41(0,"span"),e.EFF(1,"\u2714"),e.k0s())}function h(r,g){if(1&r){const t=e.RV6();e.j41(0,"div",5),e.bIt("click",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.selecionar(o))})("keydown.enter",function(){const o=e.eBV(t).$implicit,n=e.XpG(2);return e.Njj(n.selecionar(o))}),e.j41(1,"span"),e.EFF(2),e.k0s(),e.DNE(3,b,2,0,"span",6),e.k0s()}if(2&r){const t=g.$implicit,a=g.index,o=e.XpG(2);e.BMQ("data-index",a)("aria-selected",t.valor===(null==o.opcaoSelecionada?null:o.opcaoSelecionada.valor)),e.R7$(2),e.JRh(t.texto),e.R7$(),e.Y8G("ngIf",t.valor===(null==o.opcaoSelecionada?null:o.opcaoSelecionada.valor))}}function d(r,g){if(1&r){const t=e.RV6();e.j41(0,"div",3),e.bIt("keydown.arrowDown",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.navegar(1))})("keydown.arrowUp",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.navegar(-1))})("keydown.escape",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.fechar())}),e.DNE(1,h,4,4,"div",4),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("ngClass",t.classePainel),e.R7$(),e.Y8G("ngForOf",t.opcoes)}}let v=(()=>{class r{constructor(t,a){this.overlay=t,this.host=a,this.opcoes=[],this.placeholder="Selecione",this.valorChange=new e.bkB,this.classeBotao="",this.classePainel="",this.aberto=!1}ngOnInit(){this.opcaoSelecionada=this.opcoes.find(t=>t.valor===this.valor)}abrir(){if(this.aberto)return;const t=this.host.nativeElement.getBoundingClientRect(),a=new u.rR({hasBackdrop:!0,backdropClass:"bg-black/50",positionStrategy:this.overlay.position().flexibleConnectedTo(this.host).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])});this.overlayRef=this.overlay.create(a),this.overlayRef.backdropClick().subscribe(()=>this.fechar()),this.portal&&this.overlayRef.attach(this.portal),this.aberto=!0,this.overlayRef.updateSize({width:t.width}),this.overlayRef.overlayElement.style.setProperty("--largura",t.width+"px")}fechar(){this.aberto=!1,this.overlayRef?.detach(),this.overlayRef?.dispose(),this.overlayRef=void 0}selecionar(t){this.opcaoSelecionada=t,this.valor=t.valor,this.valorChange.emit(t.valor),this.fechar()}navegar(t){const a=this.overlayRef?.overlayElement;if(!a)return;const o=Array.from(a.querySelectorAll("[data-index]")),n=o.findIndex(c=>c.classList.contains("bg-slate-800")),l=Math.max(0,Math.min(o.length-1,(n<0?0:n)+t));o.forEach(c=>c.classList.remove("bg-slate-800")),o[l]?.classList.add("bg-slate-800"),o[l]?.scrollIntoView({block:"nearest"})}static{this.\u0275fac=function(a){return new(a||r)(e.rXU(u.hJ),e.rXU(e.aKT))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-seletor-suspenso"]],viewQuery:function(a,o){if(1&a&&e.GBs(m.bV,5),2&a){let n;e.mGM(n=e.lsd())&&(o.portal=n.first)}},inputs:{opcoes:"opcoes",placeholder:"placeholder",valor:"valor",classeBotao:"classeBotao",classePainel:"classePainel"},outputs:{valorChange:"valorChange"},standalone:!0,features:[e.aNF],decls:6,vars:5,consts:[["type","button",1,"w-full","flex","items-center","justify-between","px-3","py-2","rounded-xl","border","border-white/10","bg-slate-800","text-white",3,"click","keydown.enter","keydown.space","keyup.enter","keyup.space","ngClass"],[1,"transition-transform"],["cdk-portal",""],["role","listbox","tabindex","0",1,"z-50","mt-1","max-h-60","w-[var(--largura)]","overflow-auto","rounded-xl","border","border-white/10","bg-slate-900","text-white","shadow-xl",3,"keydown.arrowDown","keydown.arrowUp","keydown.escape","ngClass"],["class","px-3 py-2 cursor-pointer flex items-center justify-between hover:bg-slate-800 focus:outline-none","tabindex","0","role","option",3,"click","keydown.enter",4,"ngFor","ngForOf"],["tabindex","0","role","option",1,"px-3","py-2","cursor-pointer","flex","items-center","justify-between","hover:bg-slate-800","focus:outline-none",3,"click","keydown.enter"],[4,"ngIf"]],template:function(a,o){1&a&&(e.j41(0,"button",0),e.bIt("click",function(){return o.abrir()})("keydown.enter",function(){return o.abrir()})("keydown.space",function(){return o.abrir()})("keyup.enter",function(){return o.abrir()})("keyup.space",function(){return o.abrir()}),e.j41(1,"span"),e.EFF(2),e.k0s(),e.j41(3,"span",1),e.EFF(4,"\u25bc"),e.k0s()(),e.DNE(5,d,2,2,"ng-template",2)),2&a&&(e.Y8G("ngClass",o.classeBotao),e.BMQ("aria-expanded",o.aberto),e.R7$(2),e.JRh((null==o.opcaoSelecionada?null:o.opcaoSelecionada.texto)||o.placeholder),e.R7$(),e.AVh("rotate-180",o.aberto))},dependencies:[s.MD,s.YU,s.Sq,s.bT,m.jc,m.Qq],encapsulation:2,changeDetection:0})}}return r})();var y=i(165),C=i(9288),w=i(4593);let j=(()=>{class r{constructor(t){this.dexie=t}restaurarDeArquivo(t){var a=this;return(0,p.A)(function*(){const o=yield t.text();return yield a.dexie.importarDadosDoJson(o),!0})()}static{this.\u0275fac=function(a){return new(a||r)(e.KVO(w.b))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var S=i(3993),E=i(4016);function F(r,g){if(1&r&&(e.j41(0,"pre",8),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2);e.R7$(),e.SpI("            ",t.detalhes,"\n          ")}}function R(r,g){if(1&r){const t=e.RV6();e.j41(0,"div",1),e.bIt("keydown.escape",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.fechar())}),e.j41(1,"button",2),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.fechar())}),e.EFF(2," \u2715 "),e.k0s(),e.j41(3,"h3",3),e.EFF(4),e.k0s(),e.j41(5,"p",4),e.EFF(6),e.k0s(),e.DNE(7,F,2,1,"pre",5),e.j41(8,"div",6)(9,"button",7),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.fechar())}),e.EFF(10," Fechar "),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(4),e.JRh(t.titulo||"Erro"),e.R7$(2),e.JRh(t.mensagem),e.R7$(),e.Y8G("ngIf",t.detalhes)}}let D=(()=>{class r{constructor(t){this.overlay=t,this.aberto=!1,this.mensagem="",this.fecharModal=new e.bkB}ngOnChanges(){this.aberto?this.abrir():this.fechar()}abrir(){if(this.overlayRef)return;const t=new u.rR({hasBackdrop:!0,backdropClass:"bg-black/60",positionStrategy:this.overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:this.overlay.scrollStrategies.block()});this.overlayRef=this.overlay.create(t),this.overlayRef.backdropClick().subscribe(()=>this.fechar()),this.portal&&this.overlayRef.attach(this.portal)}fechar(){this.fecharModal.emit(),this.overlayRef?.detach(),this.overlayRef?.dispose(),this.overlayRef=void 0,this.aberto=!1}static{this.\u0275fac=function(a){return new(a||r)(e.rXU(u.hJ))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-modal-erro"]],viewQuery:function(a,o){if(1&a&&e.GBs(m.bV,5),2&a){let n;e.mGM(n=e.lsd())&&(o.portal=n.first)}},inputs:{aberto:"aberto",titulo:"titulo",mensagem:"mensagem",detalhes:"detalhes"},outputs:{fecharModal:"fecharModal"},standalone:!0,features:[e.OA$,e.aNF],decls:1,vars:0,consts:[["cdk-portal",""],["tabindex","0",1,"bg-slate-900","border","border-red-500/30","rounded-2xl","p-6","w-full","max-w-md","animate-fade-in","relative",3,"keydown.escape"],["type","button",1,"absolute","top-4","right-4","text-slate-400","hover:text-slate-200",3,"click"],[1,"text-lg","font-bold","mb-2","text-red-400"],[1,"text-sm","text-slate-300"],["class","mt-3 text-xs text-slate-500 whitespace-pre-wrap",4,"ngIf"],[1,"mt-6","flex","justify-end"],["type","button",1,"px-4","py-2","rounded-xl","bg-red-600","hover:bg-red-500","text-white",3,"click"],[1,"mt-3","text-xs","text-slate-500","whitespace-pre-wrap"]],template:function(a,o){1&a&&e.DNE(0,R,11,3,"ng-template",0)},dependencies:[s.MD,s.bT,m.jc,m.Qq],encapsulation:2,changeDetection:0})}}return r})(),A=(()=>{class r{constructor(){this.cfg=(0,e.WQX)(y.y),this.backup=(0,e.WQX)(C.R),this.restauracao=(0,e.WQX)(j),this.dexie=(0,e.WQX)(w.b),this.toast=(0,e.WQX)(E.W),this.configuracoes=(0,e.EWP)(()=>this.cfg.configuracoes()),this.ultimoBackup=(0,e.vPA)(null),this.TipoBotaoEnum=S.JM,this.opcoesIntervalo=[{valor:"Nunca",texto:"Nunca"},{valor:"A cada 1 dia",texto:"A cada 1 dia"},{valor:"A cada 7 dias",texto:"A cada 7 dias"},{valor:"A cada 30 dias",texto:"A cada 30 dias"}],this.opcoesModo=[{valor:"Perguntar antes de fazer",texto:"Perguntar antes de fazer"},{valor:"Autom\xe1tico (sem perguntar)",texto:"Autom\xe1tico (sem perguntar)"}],this.erroAberto=!1,this.erroTitulo="",this.erroMensagem="",this.processandoGerar=!1,this.processandoBaixar=!1,this.processandoRestaurar=!1,this.dexie.obterDataDoUltimoBackup().then(t=>this.ultimoBackup.set(t))}alterarIntervalo(t){var a=this;return(0,p.A)(function*(){const o=String(t);yield a.cfg.atualizarIntervalo(o)})()}alterarModo(t){var a=this;return(0,p.A)(function*(){const o=String(t);yield a.cfg.atualizarModo(o)})()}alternarBackupAtivo(t){var a=this;return(0,p.A)(function*(){yield a.cfg.atualizarBackupAtivo(t)})()}selecionarArquivoDestino(){var t=this;return(0,p.A)(function*(){yield t.backup.selecionarArquivoDestino()})()}restaurarDoArquivoDestino(){var t=this;return(0,p.A)(function*(){t.processandoRestaurar=!0;try{const a=yield t.backup.obterArquivoDestinoComoFile();if(!a)return t.erroTitulo="Arquivo de backup n\xe3o selecionado",t.erroMensagem="Selecione o arquivo destino do backup para poder restaurar.",void(t.erroAberto=!0);yield t.restauracao.restaurarDeArquivo(a),t.toast.sucesso("Restaura\xe7\xe3o conclu\xedda")}finally{t.processandoRestaurar=!1}})()}gerarBackupAgora(){var t=this;return(0,p.A)(function*(){t.processandoGerar=!0;try{const a=yield t.backup.gerarBackupComoJson();a.sucesso?(t.toast.sucesso("Backup gerado com sucesso"),t.ultimoBackup.set(new Date)):(t.erroTitulo="Falha ao gerar backup",t.erroMensagem=a.mensagem??"Erro desconhecido",t.erroAberto=!0)}finally{t.processandoGerar=!1}})()}baixarBackup(){var t=this;return(0,p.A)(function*(){t.processandoBaixar=!0;try{const a=yield t.backup.baixarBackup("backup-csharp-cash.json");a.sucesso?(t.toast.sucesso("Backup baixado"),t.ultimoBackup.set(new Date)):(t.erroTitulo="Falha ao baixar backup",t.erroMensagem=a.mensagem??"Erro desconhecido",t.erroAberto=!0)}finally{t.processandoBaixar=!1}})()}fecharErro(){this.erroAberto=!1,this.erroTitulo="",this.erroMensagem=""}static{this.\u0275fac=function(a){return new(a||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-configuracoes-de-backup"]],standalone:!0,features:[e.aNF],decls:33,vars:27,consts:[["backupAtivo",""],[1,"space-y-6"],[1,"bg-slate-900","border","border-white/10","p-6","rounded-3xl"],[1,"text-lg","font-bold","text-white","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-xs","text-slate-400","mb-1"],[3,"valorChange","opcoes","valor"],[1,"mt-4","flex","items-center","gap-3","flex-wrap"],[1,"flex","items-center","gap-2","text-xs","text-slate-300"],["type","checkbox",3,"change","checked"],[3,"aoClicar","tipo","classeExtra"],[1,"text-[11px]","px-3","py-1","rounded-full","border","border-white/10","text-slate-300","bg-slate-800/50"],[1,"mt-4","text-xs","text-slate-400"],[1,"mt-6","flex","flex-wrap","gap-2"],[3,"aoClicar","tipo","carregando","classeExtra","desabilitado"],[3,"fecharModal","aberto","titulo","mensagem"]],template:function(a,o){if(1&a){const n=e.RV6();e.j41(0,"section",1)(1,"div",2)(2,"h3",3),e.EFF(3,"Op\xe7\xf5es de Backup"),e.k0s(),e.j41(4,"div",4)(5,"div")(6,"div",5),e.EFF(7,"Intervalo de backup"),e.k0s(),e.j41(8,"app-seletor-suspenso",6),e.bIt("valorChange",function(c){return e.eBV(n),e.Njj(o.alterarIntervalo(c))}),e.k0s()(),e.j41(9,"div")(10,"div",5),e.EFF(11,"Modo de backup"),e.k0s(),e.j41(12,"app-seletor-suspenso",6),e.bIt("valorChange",function(c){return e.eBV(n),e.Njj(o.alterarModo(c))}),e.k0s()()(),e.j41(13,"div",7)(14,"label",8)(15,"input",9,0),e.bIt("change",function(){e.eBV(n);const c=e.sdS(16);return e.Njj(o.alternarBackupAtivo(c.checked))}),e.k0s(),e.EFF(17," Backup autom\xe1tico ativo "),e.k0s(),e.j41(18,"app-botao",10),e.bIt("aoClicar",function(){return e.eBV(n),e.Njj(o.selecionarArquivoDestino())}),e.EFF(19," Selecionar arquivo destino "),e.k0s(),e.j41(20,"span",11),e.EFF(21),e.k0s()(),e.j41(22,"div",12),e.EFF(23),e.nI1(24,"date"),e.k0s(),e.j41(25,"div",13)(26,"app-botao",14),e.bIt("aoClicar",function(){return e.eBV(n),e.Njj(o.gerarBackupAgora())}),e.EFF(27,"Gerar Backup Agora"),e.k0s(),e.j41(28,"app-botao",14),e.bIt("aoClicar",function(){return e.eBV(n),e.Njj(o.baixarBackup())}),e.EFF(29,"Baixar Backup"),e.k0s(),e.j41(30,"app-botao",14),e.bIt("aoClicar",function(){return e.eBV(n),e.Njj(o.restaurarDoArquivoDestino())}),e.EFF(31,"Restaurar do Arquivo de Backup"),e.k0s()()()(),e.j41(32,"app-modal-erro",15),e.bIt("fecharModal",function(){return e.eBV(n),e.Njj(o.fecharErro())}),e.k0s()}if(2&a){let n,l,c,x;e.R7$(8),e.Y8G("opcoes",o.opcoesIntervalo)("valor",o.configuracoes().intervalo),e.R7$(4),e.Y8G("opcoes",o.opcoesModo)("valor",o.configuracoes().modo),e.R7$(3),e.Y8G("checked",null!==(n=o.configuracoes().backupAtivo)&&void 0!==n&&n),e.R7$(3),e.Y8G("tipo",o.TipoBotaoEnum.Secundario)("classeExtra","rounded-full"),e.R7$(3),e.SpI(" Destino: ",null!==(l=o.configuracoes().arquivoDestinoNome)&&void 0!==l?l:"Nenhum"," "),e.R7$(2),e.SpI(" \xdaltimo backup: ",o.ultimoBackup()?e.i5U(24,24,o.ultimoBackup(),"short"):"Nunca"," "),e.R7$(3),e.Y8G("tipo",o.TipoBotaoEnum.Primario)("carregando",o.processandoGerar)("classeExtra","rounded-full")("desabilitado",null!==(c=o.configuracoes().backupAtivo)&&void 0!==c&&c&&!o.configuracoes().arquivoDestinoNome),e.R7$(2),e.Y8G("tipo",o.TipoBotaoEnum.Secundario)("carregando",o.processandoBaixar)("classeExtra","rounded-full")("desabilitado",null!==(x=o.configuracoes().backupAtivo)&&void 0!==x&&x&&!o.configuracoes().arquivoDestinoNome),e.R7$(2),e.Y8G("tipo",o.TipoBotaoEnum.Secundario)("carregando",o.processandoRestaurar)("classeExtra","rounded-full")("desabilitado",!o.configuracoes().arquivoDestinoNome),e.R7$(2),e.Y8G("aberto",o.erroAberto)("titulo",o.erroTitulo)("mensagem",o.erroMensagem)}},dependencies:[s.MD,s.vh,k.n,v,D],encapsulation:2})}}return r})(),T=(()=>{class r{static{this.\u0275fac=function(a){return new(a||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-configuracoes-page"]],standalone:!0,features:[e.aNF],decls:2,vars:0,consts:[[1,"space-y-8","animate-fade-in"]],template:function(a,o){1&a&&(e.j41(0,"section",0),e.nrm(1,"app-configuracoes-de-backup"),e.k0s())},dependencies:[s.MD,f.X1,A],encapsulation:2})}}return r})()}}]);