"use strict";(self.webpackChunkcsharp_cash=self.webpackChunkcsharp_cash||[]).push([[642],{5642:(A,u,n)=>{n.r(u),n.d(u,{FixosPageComponent:()=>D});var o=n(4438),d=n(177),r=n(4341),g=n(1593),x=n(7419),f=n(9385),c=n(4550),h=n(2839),v=n(1605),F=n(6927),b=n(4885),E=n(741),R=n(9299),I=n(6848),p=n(3993);const G=()=>({categoriaNaoExistente:"Categoria nova \u2014 ser\xe1 criada ao salvar"});function j(i,m){if(1&i){const t=o.RV6();o.j41(0,"app-botao",28),o.bIt("aoClicar",function(){o.eBV(t);const a=o.XpG();return o.Njj(a.cancelarEdicaoFixo())}),o.EFF(1,"Cancelar"),o.k0s()}if(2&i){const t=o.XpG();o.Y8G("tipo",t.TipoBotaoEnum.Texto)("tamanho",t.TamanhoBotaoEnum.Medio)("classeExtra","text-slate-400 hover:text-yellow-500")}}function P(i,m){if(1&i){const t=o.RV6();o.j41(0,"app-botao",39),o.bIt("aoClicar",function(){o.eBV(t);const a=o.XpG().$implicit,s=o.XpG();return o.Njj(s.lancarGastoFixoNoHistorico(a))}),o.j41(1,"span"),o.EFF(2,"Pagar"),o.k0s()()}if(2&i){const t=o.XpG(2);o.Y8G("tamanho",t.TamanhoBotaoEnum.Pequeno)("tipo",t.TipoBotaoEnum.Secundario)("classeExtra","bg-slate-800 hover:bg-green-600 hover:text-white text-green-500 border border-green-500/30 flex items-center gap-1 shadow-sm")}}function N(i,m){1&i&&(o.j41(0,"div",40)(1,"span"),o.EFF(2,"\u2714 Pago"),o.k0s()())}function $(i,m){if(1&i){const t=o.RV6();o.j41(0,"div",29)(1,"div",30)(2,"div",31),o.EFF(3),o.k0s(),o.j41(4,"div")(5,"p",32),o.EFF(6),o.k0s(),o.j41(7,"p",33),o.EFF(8),o.k0s()()(),o.j41(9,"div",34)(10,"span",35),o.EFF(11),o.nI1(12,"currency"),o.k0s(),o.j41(13,"div",17),o.DNE(14,P,3,3,"app-botao",36)(15,N,3,0,"div",37),o.j41(16,"app-botao",38),o.bIt("aoClicar",function(){const a=o.eBV(t).$implicit,s=o.XpG();return o.Njj(s.removerGastoFixo(a.id))}),o.EFF(17," \u{1f5d1} "),o.k0s(),o.j41(18,"app-botao",38),o.bIt("aoClicar",function(){const a=o.eBV(t).$implicit,s=o.XpG();return o.Njj(s.iniciarEdicaoFixo(a))}),o.EFF(19," \u270e "),o.k0s()()()()}if(2&i){const t=m.$implicit,e=o.XpG();o.R7$(3),o.SpI(" ","Streaming"===t.categoria?"\u{1f4fa}":"Casa"===t.categoria?"\u{1f3e0}":"Educacao"===t.categoria?"\u{1f393}":"\u{1f4c4}"," "),o.R7$(3),o.JRh(t.descricao),o.R7$(2),o.Lme(" Dia ",t.diaVencimento," \u2022 ",e.getNomeMetodo(t.metodoPagamento)," "),o.R7$(3),o.JRh(o.i5U(12,13,t.valor,"BRL")),o.R7$(3),o.Y8G("ngIf",!t.pagoEsteMes),o.R7$(),o.Y8G("ngIf",t.pagoEsteMes),o.R7$(),o.Y8G("tamanho",e.TamanhoBotaoEnum.Pequeno)("tipo",e.TipoBotaoEnum.Texto)("classeExtra","text-slate-600 hover:text-red-500 px-3 py-2 rounded-xl hover:bg-red-500/10"),o.R7$(2),o.Y8G("tamanho",e.TamanhoBotaoEnum.Pequeno)("tipo",e.TipoBotaoEnum.Texto)("classeExtra","text-slate-600 hover:text-yellow-500 px-3 py-2 rounded-xl hover:bg-yellow-500/10")}}function T(i,m){1&i&&(o.j41(0,"div",41),o.EFF(1," Nenhum gasto fixo cadastrado. "),o.k0s())}let D=(()=>{class i{constructor(){this.fixos=(0,o.WQX)(g.N),this.transacoes=(0,o.WQX)(x.j),this.carteira=(0,o.WQX)(f.t),this.fb=(0,o.WQX)(r.ok),this.fixoForm=function C(i){return i.group({descricao:["",[r.k0.required,r.k0.minLength(2)]],valor:[null,[r.k0.required,r.k0.min(.01)]],diaVencimento:[1,[r.k0.required,r.k0.min(1),r.k0.max(31)]],categoria:["Outros",[r.k0.required]],metodoPagamento:["DINHEIRO",[r.k0.required]],vigenteAte:[null]})}(this.fb),this.editandoId=(0,o.vPA)(null),this.anoMesAtual=(0,o.vPA)((0,c.R)()),this.filtroForm=this.fb.group({mes:[(0,c.R)()]}),this.TipoBotaoEnum=p.JM,this.TamanhoBotaoEnum=p.nT,this.fixosComStatus=(0,o.EWP)(()=>{const t=this.transacoes.transacoes().filter(e=>e.data.startsWith(this.anoMesAtual()));return this.fixos.comStatus(t,this.anoMesAtual())}),this.filtroForm.get("mes").valueChanges.subscribe(t=>this.anoMesAtual.set(t??(0,c.R)()))}adicionarGastoFixo(t){if(t.preventDefault(),this.fixoForm.invalid)return void this.fixoForm.markAllAsTouched();const e=this.fixoForm.getRawValue(),a=this.editandoId();a?(this.fixos.atualizar(a,{descricao:(e.descricao??"").trim(),valor:Number(e.valor??0),diaVencimento:Number(e.diaVencimento??1),categoria:(e.categoria??"Outros").trim(),metodoPagamento:e.metodoPagamento??"DINHEIRO",vigenteAte:e.vigenteAte??void 0}),this.editandoId.set(null)):this.fixos.adicionar({descricao:(e.descricao??"").trim(),valor:Number(e.valor??0),diaVencimento:Number(e.diaVencimento??1),categoria:(e.categoria??"Outros").trim(),metodoPagamento:e.metodoPagamento??"DINHEIRO",vigenteAte:e.vigenteAte??void 0}),this.fixoForm.reset({descricao:"",valor:null,diaVencimento:1,categoria:"Outros",metodoPagamento:"DINHEIRO",vigenteAte:null})}removerGastoFixo(t){this.fixos.remover(t)}lancarGastoFixoNoHistorico(t){const e=`${this.anoMesAtual()}-${String(Math.min(28,t.diaVencimento)).padStart(2,"0")}`;this.transacoes.adicionar({descricao:t.descricao,valor:t.valor,data:e,categoria:t.categoria,metodoPagamento:t.metodoPagamento,origemFixoId:t.id})}cartoes(){return this.carteira.cartoes()}getNomeMetodo(t){return this.carteira.getNomeMetodo(t)}totalFixos(){return this.fixos.totalNoMes(this.anoMesAtual())}iniciarEdicaoFixo(t){this.editandoId.set(t.id),this.fixoForm.patchValue({descricao:t.descricao,valor:t.valor,diaVencimento:t.diaVencimento,categoria:t.categoria,metodoPagamento:t.metodoPagamento,vigenteAte:t.vigenteAte??null})}cancelarEdicaoFixo(){this.editandoId.set(null),this.fixoForm.reset({descricao:"",valor:null,diaVencimento:1,categoria:"Outros",metodoPagamento:"DINHEIRO",vigenteAte:null})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=o.VBU({type:i,selectors:[["app-fixos-page"]],standalone:!0,features:[o.aNF],decls:34,vars:39,consts:[[1,"animate-fade-in","space-y-6"],[1,"flex","flex-col","md:flex-row","gap-6"],[1,"w-full","md:w-1/3","bg-slate-900","border","border-white/10","p-6","rounded-3xl","h-fit","shadow-xl"],[1,"text-xl","font-bold","mb-4","text-purple-400"],[1,"space-y-4",3,"ngSubmit","formGroup"],["rotulo","Descri\xe7\xe3o",3,"nomeControle","obrigatorio","idInput"],["id","descFix","type","text","formControlName","descricao",1,"w-full","bg-slate-950","border","border-slate-800","rounded-2xl","px-4","py-3","text-white","focus:border-purple-500","outline-none","transition","shadow-inner"],["rotulo","Valor (R$)",3,"nomeControle","obrigatorio","idInput"],["id","valFix","formControlName","valor"],["rotulo","Dia Vencimento",3,"nomeControle","obrigatorio","idInput"],["id","diaFix","type","number","min","1","max","31","formControlName","diaVencimento","appSomenteNumeros","",1,"w-full","bg-slate-950","border","border-slate-800","rounded-2xl","px-4","py-3","text-white","focus:border-purple-500","outline-none","transition","shadow-inner"],["rotulo","Vigente at\xe9 (m\xeas)",3,"nomeControle","obrigatorio"],["formControlName","vigenteAte",3,"modo"],["rotulo","Categoria",3,"nomeControle","obrigatorio","mensagensErro"],["formControlName","categoria",3,"obrigatorio","tocado"],["rotulo","Forma Padr\xe3o",3,"nomeControle","obrigatorio"],["formControlName","metodoPagamento",3,"cartoes","obrigatorio","tocado"],[1,"flex","items-center","gap-2"],["tipoHtml","submit",3,"tipo","tamanho","cheio"],[3,"tipo","tamanho","classeExtra","aoClicar",4,"ngIf"],[1,"flex-1","space-y-4"],[1,"text-lg","font-bold","text-white","px-2","flex","flex-col","sm:flex-row","items-start","sm:items-center","justify-between","gap-3"],[1,"flex","items-center","gap-3","w-full","sm:w-auto","flex-wrap"],[1,"text-sm","font-normal","text-slate-400"],[1,"w-full","sm:w-auto",3,"formGroup"],["formControlName","mes",3,"modo"],["class","bg-slate-900/50 border border-white/5 p-4 rounded-3xl flex flex-col sm:flex-row justify-between items-center gap-4 transition hover:bg-slate-800/30 group",4,"ngFor","ngForOf"],["class","text-center py-10 text-slate-600 border-2 border-dashed border-slate-800 rounded-3xl",4,"ngIf"],[3,"aoClicar","tipo","tamanho","classeExtra"],[1,"bg-slate-900/50","border","border-white/5","p-4","rounded-3xl","flex","flex-col","sm:flex-row","justify-between","items-center","gap-4","transition","hover:bg-slate-800/30","group"],[1,"flex","items-center","gap-4","w-full","sm:w-auto"],[1,"w-12","h-12","rounded-2xl","flex","items-center","justify-center","text-2xl","bg-slate-800","text-slate-300","shadow-md","group-hover:scale-110","transition"],[1,"font-bold","text-white","text-lg"],[1,"text-xs","text-slate-500"],[1,"flex","items-center","gap-4","w-full","sm:w-auto","justify-between","sm:justify-end"],[1,"font-bold","text-white","text-xl"],["title","Lan\xe7ar no hist\xf3rico deste m\xeas",3,"tamanho","tipo","classeExtra","aoClicar",4,"ngIf"],["class","bg-green-500/10 text-green-500 px-4 py-2 rounded-xl text-xs font-bold border border-green-500/20 flex items-center gap-1",4,"ngIf"],[3,"aoClicar","tamanho","tipo","classeExtra"],["title","Lan\xe7ar no hist\xf3rico deste m\xeas",3,"aoClicar","tamanho","tipo","classeExtra"],[1,"bg-green-500/10","text-green-500","px-4","py-2","rounded-xl","text-xs","font-bold","border","border-green-500/20","flex","items-center","gap-1"],[1,"text-center","py-10","text-slate-600","border-2","border-dashed","border-slate-800","rounded-3xl"]],template:function(e,a){if(1&e&&(o.j41(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),o.EFF(4),o.k0s(),o.j41(5,"form",4),o.bIt("ngSubmit",function(l){return a.adicionarGastoFixo(l)}),o.j41(6,"app-campo-formulario",5),o.nrm(7,"input",6),o.k0s(),o.j41(8,"app-campo-formulario",7),o.nrm(9,"app-input-moeda",8),o.k0s(),o.j41(10,"app-campo-formulario",9),o.nrm(11,"input",10),o.k0s(),o.j41(12,"app-campo-formulario",11),o.nrm(13,"app-input-data",12),o.k0s(),o.j41(14,"app-campo-formulario",13),o.nrm(15,"app-categoria-select",14),o.k0s(),o.j41(16,"app-campo-formulario",15),o.nrm(17,"app-pagamento-select",16),o.k0s(),o.j41(18,"div",17)(19,"app-botao",18),o.EFF(20),o.k0s(),o.DNE(21,j,2,3,"app-botao",19),o.k0s()()(),o.j41(22,"div",20)(23,"h3",21)(24,"span"),o.EFF(25),o.k0s(),o.j41(26,"div",22)(27,"div",23),o.EFF(28),o.nI1(29,"currency"),o.k0s(),o.j41(30,"div",24),o.nrm(31,"app-input-data",25),o.k0s()()(),o.DNE(32,$,20,16,"div",26)(33,T,2,0,"div",27),o.k0s()()()),2&e){let s,l;o.R7$(4),o.SpI(" ",a.editandoId()?"Editar Gasto Fixo":"Novo Gasto Fixo"," "),o.R7$(),o.Y8G("formGroup",a.fixoForm),o.R7$(),o.Y8G("nomeControle","descricao")("obrigatorio",!0)("idInput","descFix"),o.R7$(2),o.Y8G("nomeControle","valor")("obrigatorio",!0)("idInput","valFix"),o.R7$(2),o.Y8G("nomeControle","diaVencimento")("obrigatorio",!0)("idInput","diaFix"),o.R7$(2),o.Y8G("nomeControle","vigenteAte")("obrigatorio",!1),o.R7$(),o.Y8G("modo","mes"),o.R7$(),o.Y8G("nomeControle","categoria")("obrigatorio",!0)("mensagensErro",o.lJ4(38,G)),o.R7$(),o.Y8G("obrigatorio",!0)("tocado",null!==(s=null==(s=a.fixoForm.get("categoria"))?null:s.touched)&&void 0!==s&&s),o.R7$(),o.Y8G("nomeControle","metodoPagamento")("obrigatorio",!0),o.R7$(),o.Y8G("cartoes",a.cartoes())("obrigatorio",!0)("tocado",null!==(l=null==(l=a.fixoForm.get("metodoPagamento"))?null:l.touched)&&void 0!==l&&l),o.R7$(2),o.Y8G("tipo",a.TipoBotaoEnum.Primario)("tamanho",a.TamanhoBotaoEnum.Grande)("cheio",!0),o.R7$(),o.JRh(a.editandoId()?"Salvar Edi\xe7\xe3o":"Salvar Fixo"),o.R7$(),o.Y8G("ngIf",a.editandoId()),o.R7$(4),o.SpI("Assinaturas & Contas (",a.fixosComStatus().length,")"),o.R7$(3),o.SpI(" Total: ",o.i5U(29,35,a.totalFixos(),"BRL")," "),o.R7$(2),o.Y8G("formGroup",a.filtroForm),o.R7$(),o.Y8G("modo","mes"),o.R7$(),o.Y8G("ngForOf",a.fixosComStatus()),o.R7$(),o.Y8G("ngIf",0===a.fixosComStatus().length)}},dependencies:[d.MD,d.Sq,d.bT,d.oe,r.X1,r.qT,r.me,r.Q0,r.BC,r.cb,r.VZ,r.zX,r.j4,r.JD,h.E,v.k,F.J,b.E,E.a,R.A,I.n],encapsulation:2})}}return i})()}}]);