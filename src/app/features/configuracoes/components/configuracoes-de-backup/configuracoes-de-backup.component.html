<section class="space-y-6">
  <div class="bg-slate-900 border border-white/10 p-6 rounded-3xl">
    <h3 class="text-lg font-bold text-white mb-4">Opções de Backup</h3>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <div class="block text-xs text-slate-400 mb-1">Intervalo de backup</div>
        <app-seletor-suspenso
          [opcoes]="opcoesIntervalo"
          [valor]="configuracoes().intervalo"
          (valorChange)="alterarIntervalo($event)"
        ></app-seletor-suspenso>
      </div>

      <div>
        <div class="block text-xs text-slate-400 mb-1">Modo de backup</div>
        <app-seletor-suspenso
          [opcoes]="opcoesModo"
          [valor]="configuracoes().modo"
          (valorChange)="alterarModo($event)"
        ></app-seletor-suspenso>
      </div>
    </div>

    <div class="mt-4 flex items-center gap-3 flex-wrap">
      <label class="flex items-center gap-2 text-xs text-slate-300">
        <input
          #backupAtivo
          type="checkbox"
          [checked]="configuracoes().backupAtivo ?? false"
          (change)="alternarBackupAtivo(backupAtivo.checked)"
        />
        Backup automático ativo
      </label>
      <app-botao
        [tipo]="TipoBotaoEnum.Secundario"
        [classeExtra]="'rounded-full'"
        (aoClicar)="selecionarArquivoDestino()"
      >
        Selecionar arquivo destino
      </app-botao>
      <span
        class="text-[11px] px-3 py-1 rounded-full border border-white/10 text-slate-300 bg-slate-800/50"
      >
        Destino: {{ configuracoes().arquivoDestinoNome ?? 'Nenhum' }}
      </span>
    </div>

    <div class="mt-4 text-xs text-slate-400">
      Último backup: {{ ultimoBackup() ? (ultimoBackup() | date: 'short') : 'Nunca' }}
    </div>

    <div class="mt-6 flex flex-wrap gap-2">
      <app-botao
        [tipo]="TipoBotaoEnum.Primario"
        (aoClicar)="gerarBackupAgora()"
        [carregando]="processandoGerar"
        [classeExtra]="'rounded-full'"
        [desabilitado]="
          (configuracoes().backupAtivo ?? false) && !configuracoes().arquivoDestinoNome
        "
        >Gerar Backup Agora</app-botao
      >
      <app-botao
        [tipo]="TipoBotaoEnum.Secundario"
        (aoClicar)="baixarBackup()"
        [carregando]="processandoBaixar"
        [classeExtra]="'rounded-full'"
        [desabilitado]="
          (configuracoes().backupAtivo ?? false) && !configuracoes().arquivoDestinoNome
        "
        >Baixar Backup</app-botao
      >
      <app-botao
        [tipo]="TipoBotaoEnum.Secundario"
        (aoClicar)="restaurarDoArquivoDestino()"
        [carregando]="processandoRestaurar"
        [classeExtra]="'rounded-full'"
        [desabilitado]="!configuracoes().arquivoDestinoNome"
        >Restaurar do Arquivo de Backup</app-botao
      >
    </div>
  </div>
</section>
<app-modal-erro
  [aberto]="erroAberto"
  [titulo]="erroTitulo"
  [mensagem]="erroMensagem"
  (fecharModal)="fecharErro()"
></app-modal-erro>
