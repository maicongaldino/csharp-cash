"use strict";(self.webpackChunkcsharp_cash=self.webpackChunkcsharp_cash||[]).push([[686],{4686:(g,h,i)=>{i.r(h),i.d(h,{TopCategoriasApexComponent:()=>d});var p=i(177),c=i(4626),r=i(1740),t=i(4438),l=i(4090);const u=["chartCmp"];let d=(()=>{class n{constructor(a,s){this.ngZone=a,this.analytics=s,this.transacoes=[],this.topN=5,this.series=[],this.chart={type:"bar",height:260,toolbar:{show:!1}},this.xaxis={categories:[],labels:{rotate:-30}},this.plotOptions={bar:{horizontal:!0,borderRadius:6,distributed:!0}},this.colors=r.W2,this.tooltip=r.R4,this.theme=r.d6,this.grid=r._j,this.responsive=[{breakpoint:640,options:{chart:{height:210},xaxis:{tickAmount:4},grid:{strokeDashArray:4}}}],this.categoriasPendentes=[],this.valoresPendentes=[]}ngOnChanges(){const a=this.analytics.gastosPorCategoria(this.transacoes,this.topN).map(o=>({nome:o.label,valor:o.valor})),s=a.map(o=>o.nome),e=a.map(o=>o.valor);this.categoriasPendentes=s,this.valoresPendentes=e,this.chartRef&&this.ngZone.runOutsideAngular(()=>{this.chartRef?.updateSeries([{name:"Total",data:e}],!0),this.chartRef?.updateOptions({xaxis:{...this.xaxis,categories:s},chart:{redrawOnParentResize:!0}},!0,!0)})}ngAfterViewInit(){const a=this.categoriasPendentes,s=this.valoresPendentes;this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.chartRef?.updateSeries([{name:"Total",data:s}],!0),this.chartRef?.updateOptions({xaxis:{...this.xaxis,categories:a},chart:{redrawOnParentResize:!0}},!0,!0)})})}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(t.SKi),t.rXU(l.v))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-top-categorias-apex"]],viewQuery:function(s,e){if(1&s&&t.GBs(u,5),2&s){let o;t.mGM(o=t.lsd())&&(e.chartRef=o.first)}},inputs:{transacoes:"transacoes",topN:"topN"},standalone:!0,features:[t.OA$,t.aNF],decls:5,vars:9,consts:[["chartCmp",""],[1,"bg-slate-900/80","border","border-white/5","p-6","rounded-3xl","min-h-[320px]","sm:min-h-[360px]"],[1,"text-lg","font-bold","mb-4"],[3,"series","chart","xaxis","plotOptions","colors","tooltip","theme","grid","responsive"]],template:function(s,e){1&s&&(t.j41(0,"div",1)(1,"h3",2),t.EFF(2,"Top Categorias (M\xeas)"),t.k0s(),t.nrm(3,"apx-chart",3,0),t.k0s()),2&s&&(t.R7$(3),t.Y8G("series",e.series)("chart",e.chart)("xaxis",e.xaxis)("plotOptions",e.plotOptions)("colors",e.colors)("tooltip",e.tooltip)("theme",e.theme)("grid",e.grid)("responsive",e.responsive))},dependencies:[p.MD,c.J,c.Q],encapsulation:2,changeDetection:0})}}return n})()}}]);